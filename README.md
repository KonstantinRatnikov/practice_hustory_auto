# practice_hustory_auto
Задание на практику Ратников К. Проверка истории авто

Информация по работе программы

На сайте gibdd_find.php пользователь вводит vin номер авто, переходит на capcha.php, где скрипт python загружает капчу с сайта гибдд, пользователь ее разгадывает, далее токены и ответы капчи передаются на gibdd_search.php, где происходит подключение к БД, запуск скрипта на php
при помощи функции exec('python3 /var/www/site1/main.py  '. $vin, $exec_res);

'python3 /var/www/site1/main.py  '. $vin означет, что необходимо запустить скрипт python по пути  /var/www/site1/main.py и передать значение переменной $vin

Метод requests.post(url, data ).json() вернет необходимые данные, например

history = requests.post('https://xn--b1afk4ade.xn--90adear.xn--p1ai/proxy/check/auto/history', data={<данные в виде POST>}).json()

первым параметром передается ссылка, которыя обрабатывает запрос на получение данных, далее передаются данные POST, по которым сайт возвращает данные.
После чего скрипт удаляет старые данные из БД и записывает новые

После того, как отработает скрипт gibdd_search.php читает данные из БД и генерирует блоки с необходимой информацией. Функции генерации находятся в system/functions.php

OS сервера ubuntu-20.04.4-live-server

Установка через Docker

cd "путь к файлу"/docker_project
sudo docker-compose up


Также можно установить 

apache 2.4.41 ubuntu

php 7.4.3

myqsl 8.0.28

Далее создать домен и загрузить на него файлы из папки project



Можно вводить любые vin номера, но для простоты привожу пример

X9FFXXEEDF4K30119

WDD2130431A224736

Z8TXTGF2WHM045743
